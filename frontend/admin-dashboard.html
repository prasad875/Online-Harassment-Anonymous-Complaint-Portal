<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | She-Box Portal</title>
    <meta name="description"
        content="Admin dashboard for managing online harassment complaints and tracking case status.">

    <link rel="stylesheet" href="css/admin-dashboard.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

    <!-- Auth Check -->
    <script>
        if (!localStorage.getItem("adminLoggedIn")) {
            window.location.href = "admin-login.html";
        }
    </script>

    <!-- Background -->
    <div class="bg-gradient"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="brand">
                <div class="logo-icon">
                    <i class="fa-solid fa-shield-halved"></i>
                </div>
                <span>She-Box</span>
            </div>
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>

        <nav class="sidebar-nav">
            <div class="nav-section">
                <span class="nav-section-title">Main Menu</span>
                <a href="#" class="nav-item active">
                    <i class="fa-solid fa-chart-pie"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-file-lines"></i>
                    <span>All Complaints</span>
                    <span class="nav-badge">24</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-clock-rotate-left"></i>
                    <span>Pending</span>
                    <span class="nav-badge warning">8</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-circle-check"></i>
                    <span>Resolved</span>
                </a>
            </div>

            <div class="nav-section">
                <span class="nav-section-title">Analytics</span>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Reports</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-users"></i>
                    <span>User Activity</span>
                </a>
            </div>

            <div class="nav-section">
                <span class="nav-section-title">Settings</span>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-gear"></i>
                    <span>Preferences</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fa-solid fa-user-gear"></i>
                    <span>Account</span>
                </a>
            </div>
        </nav>

        <div class="sidebar-footer">
            <div class="admin-profile">
                <div class="admin-avatar">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div class="admin-info">
                    <span class="admin-name">Admin User</span>
                    <span class="admin-role">Super Admin</span>
                </div>
            </div>
            <button class="logout-btn" onclick="logout()">
                <i class="fa-solid fa-right-from-bracket"></i>
                <span>Logout</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">

        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fa-solid fa-bars"></i>
                </button>
                <div class="page-title">
                    <h1>Dashboard</h1>
                    <p>Welcome back! Here's what's happening today.</p>
                </div>
            </div>

            <div class="header-right">
                <div class="search-box">
                    <i class="fa-solid fa-search"></i>
                    <input type="text" placeholder="Search complaints...">
                </div>

                <button class="notification-btn">
                    <i class="fa-solid fa-bell"></i>
                    <span class="notification-dot"></span>
                </button>

                <button class="header-btn">
                    <i class="fa-solid fa-plus"></i>
                    New Report
                </button>
            </div>
        </header>

        <!-- Stats Cards -->
        <section class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon total">
                    <i class="fa-solid fa-folder-open"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Total Complaints</span>
                    <h2 class="stat-value" id="total">0</h2>
                    <span class="stat-change positive">
                        <i class="fa-solid fa-arrow-up"></i> 12% from last month
                    </span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon submitted">
                    <i class="fa-solid fa-paper-plane"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Submitted</span>
                    <h2 class="stat-value" id="submitted">0</h2>
                    <span class="stat-change">Awaiting review</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon investigating">
                    <i class="fa-solid fa-magnifying-glass-chart"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Investigating</span>
                    <h2 class="stat-value" id="investigating">0</h2>
                    <span class="stat-change warning">
                        <i class="fa-solid fa-clock"></i> In progress
                    </span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon resolved">
                    <i class="fa-solid fa-circle-check"></i>
                </div>
                <div class="stat-info">
                    <span class="stat-label">Resolved</span>
                    <h2 class="stat-value" id="resolved">0</h2>
                    <span class="stat-change positive">
                        <i class="fa-solid fa-arrow-up"></i> 8% increase
                    </span>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-grid">
            <div class="chart-card wide">
                <div class="card-header">
                    <h3>Complaint Trends</h3>
                    <div class="card-actions">
                        <select class="filter-select">
                            <option>Last 7 days</option>
                            <option>Last 30 days</option>
                            <option>Last 90 days</option>
                        </select>
                    </div>
                </div>
                <div class="chart-placeholder">
                    <div class="chart-bars">
                        <div class="bar" style="--height: 60%"><span>Mon</span></div>
                        <div class="bar" style="--height: 80%"><span>Tue</span></div>
                        <div class="bar" style="--height: 45%"><span>Wed</span></div>
                        <div class="bar" style="--height: 90%"><span>Thu</span></div>
                        <div class="bar" style="--height: 70%"><span>Fri</span></div>
                        <div class="bar" style="--height: 55%"><span>Sat</span></div>
                        <div class="bar" style="--height: 40%"><span>Sun</span></div>
                    </div>
                </div>
            </div>

            <div class="chart-card">
                <div class="card-header">
                    <h3>Category Distribution</h3>
                </div>
                <div class="category-list">
                    <div class="category-item">
                        <div class="category-info">
                            <span class="category-dot" style="--color: #8b5cf6"></span>
                            <span>Cyber Bullying</span>
                        </div>
                        <div class="category-bar-wrapper">
                            <div class="category-bar" style="--width: 35%; --color: #8b5cf6"></div>
                        </div>
                        <span class="category-percent">35%</span>
                    </div>
                    <div class="category-item">
                        <div class="category-info">
                            <span class="category-dot" style="--color: #06b6d4"></span>
                            <span>Online Harassment</span>
                        </div>
                        <div class="category-bar-wrapper">
                            <div class="category-bar" style="--width: 28%; --color: #06b6d4"></div>
                        </div>
                        <span class="category-percent">28%</span>
                    </div>
                    <div class="category-item">
                        <div class="category-info">
                            <span class="category-dot" style="--color: #f472b6"></span>
                            <span>Identity Theft</span>
                        </div>
                        <div class="category-bar-wrapper">
                            <div class="category-bar" style="--width: 20%; --color: #f472b6"></div>
                        </div>
                        <span class="category-percent">20%</span>
                    </div>
                    <div class="category-item">
                        <div class="category-info">
                            <span class="category-dot" style="--color: #10b981"></span>
                            <span>Others</span>
                        </div>
                        <div class="category-bar-wrapper">
                            <div class="category-bar" style="--width: 17%; --color: #10b981"></div>
                        </div>
                        <span class="category-percent">17%</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Complaints Table -->
        <section class="table-section">
            <div class="table-card">
                <div class="card-header">
                    <h3>Recent Complaints</h3>
                    <div class="card-actions">
                        <div class="table-filters">
                            <select class="filter-select">
                                <option value="">All Status</option>
                                <option value="Submitted">Submitted</option>
                                <option value="Investigating">Investigating</option>
                                <option value="Resolved">Resolved</option>
                            </select>
                            <select class="filter-select">
                                <option value="">All Priority</option>
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Low">Low</option>
                            </select>
                        </div>
                        <button class="export-btn">
                            <i class="fa-solid fa-download"></i>
                            Export
                        </button>
                    </div>
                </div>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>
                                    <label class="checkbox-wrapper">
                                        <input type="checkbox" id="selectAll">
                                        <span class="checkmark"></span>
                                    </label>
                                </th>
                                <th>Complaint ID</th>
                                <th>Category</th>
                                <th>Status</th>
                                <th>Priority</th>
                                <th>Date Filed</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Dynamic content will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <div class="table-footer">
                    <span class="table-info">Showing 1-10 of 24 complaints</span>
                    <div class="pagination">
                        <button class="page-btn"><i class="fa-solid fa-chevron-left"></i></button>
                        <button class="page-btn active">1</button>
                        <button class="page-btn">2</button>
                        <button class="page-btn">3</button>
                        <button class="page-btn"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Complaint Detail Modal -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <div class="modal-header">
                <h2>Complaint Details</h2>
                <span class="complaint-id" id="modalComplaintId">#COMP-001</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic content -->
            </div>
            <div class="modal-actions">
                <button class="btn btn-danger" onclick="updateStatus('Rejected')">
                    <i class="fa-solid fa-xmark"></i> Reject
                </button>
                <button class="btn btn-warning" onclick="updateStatus('Investigating')">
                    <i class="fa-solid fa-search"></i> Investigate
                </button>
                <button class="btn btn-success" onclick="updateStatus('Resolved')">
                    <i class="fa-solid fa-check"></i> Resolve
                </button>
            </div>
        </div>
    </div>

    <script src="js/admin-dashboard.js" defer></script>

    <script>
        // Sidebar toggle
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');

        sidebarToggle?.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
        });

        mobileMenuBtn?.addEventListener('click', () => {
            sidebar.classList.toggle('mobile-open');
        });

        // Logout function
        function logout() {
            localStorage.removeItem('adminLoggedIn');
            window.location.href = 'admin-login.html';
        }

        // Demo data
        const demoComplaints = [
            { id: 'COMP-001', category: 'Cyber Bullying', status: 'Investigating', priority: 'High', date: '2026-01-28' },
            { id: 'COMP-002', category: 'Online Harassment', status: 'Submitted', priority: 'Medium', date: '2026-01-27' },
            { id: 'COMP-003', category: 'Identity Theft', status: 'Resolved', priority: 'High', date: '2026-01-26' },
            { id: 'COMP-004', category: 'Defamation', status: 'Investigating', priority: 'Low', date: '2026-01-25' },
            { id: 'COMP-005', category: 'Cyber Bullying', status: 'Submitted', priority: 'Medium', date: '2026-01-24' },
        ];

        // Populate table
        function populateTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = demoComplaints.map(c => `
      <tr>
        <td>
          <label class="checkbox-wrapper">
            <input type="checkbox">
            <span class="checkmark"></span>
          </label>
        </td>
        <td><span class="complaint-link">${c.id}</span></td>
        <td><span class="category-tag">${c.category}</span></td>
        <td><span class="status-badge ${c.status.toLowerCase()}">${c.status}</span></td>
        <td><span class="priority-badge ${c.priority.toLowerCase()}">${c.priority}</span></td>
        <td>${c.date}</td>
        <td>
          <div class="action-buttons">
            <button class="action-btn view" title="View Details" onclick="viewDetails('${c.id}')">
              <i class="fa-solid fa-eye"></i>
            </button>
            <button class="action-btn edit" title="Edit">
              <i class="fa-solid fa-pen"></i>
            </button>
            <button class="action-btn delete" title="Delete">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </td>
      </tr>
    `).join('');

            // Update stats
            document.getElementById('total').textContent = demoComplaints.length;
            document.getElementById('submitted').textContent = demoComplaints.filter(c => c.status === 'Submitted').length;
            document.getElementById('investigating').textContent = demoComplaints.filter(c => c.status === 'Investigating').length;
            document.getElementById('resolved').textContent = demoComplaints.filter(c => c.status === 'Resolved').length;
        }

        // View details modal
        function viewDetails(id) {
            const complaint = demoComplaints.find(c => c.id === id);
            if (!complaint) return;

            document.getElementById('modalComplaintId').textContent = '#' + id;
            document.getElementById('modalBody').innerHTML = `
      <div class="detail-grid">
        <div class="detail-item">
          <label>Category</label>
          <span>${complaint.category}</span>
        </div>
        <div class="detail-item">
          <label>Status</label>
          <span class="status-badge ${complaint.status.toLowerCase()}">${complaint.status}</span>
        </div>
        <div class="detail-item">
          <label>Priority</label>
          <span class="priority-badge ${complaint.priority.toLowerCase()}">${complaint.priority}</span>
        </div>
        <div class="detail-item">
          <label>Date Filed</label>
          <span>${complaint.date}</span>
        </div>
      </div>
      <div class="detail-description">
        <label>Description</label>
        <p>This is a sample complaint description. The actual complaint details would appear here with full information about the incident reported by the user.</p>
      </div>
    `;

            document.getElementById('detailModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        function updateStatus(status) {
            alert('Status updated to: ' + status);
            closeModal();
        }

        // Initialize
        populateTable();
    </script>

</body>

</html>